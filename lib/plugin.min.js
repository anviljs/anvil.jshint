var jshint=require("./jshint"),jslintFactory=function(e,t){return t.plugin({name:"anvil.jshint",activity:"pre-process",all:!1,inclusive:!1,exclusive:!1,fileList:[],commander:[["-lint, --jslint","JSHint all JavaScript files"]],configure:function(e,t,n){e=e.jshint,e?e.all?this.all=!0:e.include?(this.inclusive=!0,this.fileList=e.include):e.exclude&&(this.exclusive=!0,this.fileList=e.exclude):t.jshint&&(this.all=!0),n()},run:function(n){var r=[];if(this.inclusive)r=this.inclusive;else if(this.all||this.exclusive)r=e.filter(t.project.files,function(e){return e.extension()===".js"}),this.exclusive&&(r=e.reject(r,function(t){return e.any(this.fileList,function(e){return e.fullPath===t.fullPath})}));r.length>0?(t.log.step("Uglifying "+r.length+" files"),t.scheduler.parallel(r,this.lint,function(){n()})):n()},lint:function(e,n){var r=this,i;t.fs.read([e.workingPath,e.name],function(r,s){s?(t.log.error("Error reading "+e.fullPath+" for linting: \n"+s.stack),n()):(i=jshint(r,options||{},globals||{}),i?t.log.event("No issues."):jshint.errors.forEach(function(e){e&&t.log.error(e)}),n())})}})};module.exports=jslintFactory